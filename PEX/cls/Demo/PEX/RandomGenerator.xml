<?xml version="1.0" encoding="UTF-8"?>
<Export generator="IRIS" version="26">
<Class name="Demo.PEX.RandomGenerator">
<Super>Ens.BusinessProcess</Super>
<TimeCreated>65032,9810.008795</TimeCreated>

<Parameter name="SETTINGS">
<Default>RemoteMessagePackageName</Default>
</Parameter>

<Property name="RemoteMessagePackageName">
<Type>%String</Type>
</Property>

<Property name="random">
<Type>%Integer</Type>
</Property>

<Method name="OnRequest">
<FormalSpec>pRequest:EnsLib.PEX.Message,*pResponse:EnsLib.PEX.Message</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set ..random = $r(10)
	quit ..SetTimer(..random)
]]></Implementation>
</Method>

<Method name="OnResponse">
<FormalSpec><![CDATA[request:%Library.Persistent,&response:%Library.Persistent,callrequest:%Library.Persistent,callresponse:%Library.Persistent,pCompletionKey:%String]]></FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set response = ##class(EnsLib.PEX.Message).%New(..RemoteMessagePackageName_".Response")
	set response.responseString = ..random
	quit $$$OK
]]></Implementation>
</Method>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
<DefaultData>RandomGeneratorDefaultData</DefaultData>
<Data name="RandomGeneratorDefaultData">
<Subscript>"RandomGenerator"</Subscript>
<Value name="1">
<Value>random</Value>
</Value>
<Value name="2">
<Value>RemoteMessagePackageName</Value>
</Value>
</Data>
</Storage>
</Class>
</Export>
